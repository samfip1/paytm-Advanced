generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int      @id @default(autoincrement())
  name      String
  username  String   @unique
  password  String
  email     String   @unique
  Money     Int      @default(0)
  createdAt DateTime @default(now())
  phone     Int      @unique
  updatedAt DateTime @updatedAt
  userid    Int      @default(0)      @unique
  totalTransactionDone    Int     @default(0)
  totalnumberofSignin   Int     @default(0)
  leaderboardId Int?
  leaderboard leaderboard? @relation(fields: [leaderboardId], references: [id])
  transaction_Pass Transactionpin[] 
  loginhistory    LoginActivity[]
  loanMoney     Loan[]
}

model Loan {
  id             Int      @id @default(autoincrement())
  loanId         Int      @unique
  loanMoney      Decimal
  time           Int
  interest       Decimal
  repaymentDate  DateTime
  status         String   @default("pending") // pending, repaid, defaulted
  userId         Int
  user           User     @relation(fields: [userId], references: [id])
}



model Transactionpin {
  id      Int     @unique   @default(autoincrement())
  user  User  @relation(fields: [transaction_pin], references: [userid])
  transaction_pin Int   @unique
}


model LoginActivity {
  id          Int      @id @default(autoincrement())
  userId      Int      
  ipAddress   String
  device      String
  browser     String
  createdAt   DateTime @default(now())
  user        User     @relation(fields: [userId], references: [id])
}


model leaderboard {
  id   Int    @id @default(autoincrement())
  rank Int?
  user User[]
  totalTransactionMoney   Int
}

model Admin {
  id        Int      @unique @default(autoincrement())
  name      String
  username  String   @unique
  password  String
  email     String   @unique
  adminId   Int      @default(0)
  phone     Int      @unique
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  totalsignin   Int     @default(0)
}



model Transaction {
  id            Int      @unique     @default(autoincrement())
  trasanctionId   Int
  senderId      Int  
  receiverId    Int 
  senderUsername String 
  receiverUsername String
  amount Int
  TransactionAt   DateTime  @default(now())
  transactionid   Int   @default(0)   @unique
  Comment   String?   
}


